[[Объектно-ориентированное программирование. Введение]]

Проекты развиваются, появляется дополнительная функциональность. Количество кода растёт. Ваша проектная работа уже состоит из нескольких js-файлов.

Какие-то файлы хранят классы. Какие-то будут хранить функции или константы. При этом разные файлы могут импортировать функциональность друг друга, чтобы использовать её. Это порождает задачу организовать взаимодействие между классами.

При организации такого взаимодействия классы должны остаться независимыми. Только тогда их можно будет использовать в разных местах проекта или в других проектах.

В этой теме мы постараемся ответить на вопрос: как организовать взаимодействие так, чтобы классы не потеряли независимость. Ведь если задачи, решаемые ими, грамотно разделены, классы проще переиспользовать.

## В проекте проблема

Допустим, в проекте есть класс `Card`, который возвращает разметку карточки товара. И класс `Section`, который вставляет разметку в DOM. `Card` и `Section` связаны друг с другом. `Section` отрисовывает разметку, которую возвращает `Card`.

> Если напрямую создавать экземпляры класса `Card` внутри методов класса `Section`, возникнет проблема.
> 
> Представьте, что к вам пришел проджект-менеджер Фёдор и поставил задачу вывести на внутренней странице сайта список новостей. Вы не сможете повторно использовать класс `Section` без его изменений, ведь `Section` не работает с карточками новостей.

В голову сразу приходит несколько вариантов выхода из такой ситуации:

-   Создать в методе класса `Section` цепь условий `if...else` и в зависимости от того, что требуется отрисовать, создавать в методе экземпляры разных классов: `Card` или `NewsCard`.
-   Создать полностью новый класс. Почти такой же, как `Section`, но который бы работал с карточками новостей.

Если в голову пришла любая из этих идей — остановитесь. Такая организация неминуемо приведёт к тому, что код станет запутанным, а классы будет сложнее переиспользовать.

И дело здесь не только в личном комфорте. Представьте, что в команде разработки есть ещё Анна, Петя и Виктор. Анна, когда видит цепочку `if...else` в методе `Section`, всё понимает, но реагирует спокойно. Петя не понимает этого кода и предпочитает выпить кофе вместо того, чтобы в нём разбираться. Виктор ругается и отказывается поддерживать этот код.

А вам выпала роль того, кто займётся рефакторингом. Ведь только так можно прийти к тому, чтобы комфортно стало всем.

## Как избежать проблемы

Всего этого можно избежать, если выбрать верный вектор проектирования. Вначале можно разделить файлы скриптов на несколько папок:

-   Файлы компонентов будем хранить в отдельной директории `components`.
-   Файлы утилитарных модулей, где хранятся отдельные функции и константы поместим в папку `utils`. Пример такой функции — возвращение случайного элемента массива. Она не относится к какому-то конкретному классу, не уникальна для определённой страницы.
-   Файлы скриптов конкретной страницы расположим в уже существующей директории `pages`. Файлы скриптов страниц содержат только уникальный для конкретной страницы код: создание новых экземпляров класса и передачу в них данных, описание взаимодействия между классами.

Упорядочивание поможет проще найти нужный класс или функцию. Всё разложено по полочкам.

В предлагаемом варианте дробления приложения особое внимание нужно уделить файлу скриптов страницы, например `index.js`. Начиная с этой темы файл `index.js` превращается в корневую точку проекта. Файл содержит только инициализацию необходимых главной странице модулей — функций и классов, а также содержит описание взаимодействия между классами:

![image](https://pictures.s3.yandex.net/resources/S8_01_1594735557.png)

_Структура файлов и папок в проекте_

Если придерживаться такой логики взаимодействия, мы сильно повысим независимость всех участков кода, а значит их можно будет использовать повторно. Можно будет определять или дополнять поведение класса `Section` на другой странице или в другом проекте. Научить его работать с другими классами и использовать другие переменные из `constants.js`.

Теперь, когда к вам придёт проджект-менеджер Фёдор и попросит на другой странице отрисовать что-то ещё, вы без проблем сделаете это. Ведь нужно будет всего лишь описать новое взаимодействие с классом `Section`. А когда придёт вечно недовольный Виктор и попросит показать штуку, которая рендерит карточки — вы просто скинете ссылку на файл в Гитхабе. И Виктору не придётся менять код, ведь класс `Section` независимый.

О взаимодействии между классами в корневой точке сборки проекта мы поговорим в следующих уроках. А пока переходите к заданиям и организуйте структуру проекта.