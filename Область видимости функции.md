
[[Функции, определение и вызов]]

Вы уже знаете, что переменные можно объявлять в любом месте кода. Но от места, где объявлена переменная, зависит возможность обратиться к этой переменной. Например, если объявить переменную внутри одной функции, то обратиться к ней из другой функции не получится. Этот урок посвящён правилам, по которым функции обращаются к переменным.

Всё просто: сначала переменную объявляют и присваивают ей значение. Затем к переменной обращаются, чтобы получить из неё значение:

Скопировать кодJAVASCRIPT

```
const a = 'INTERNET'; // создали переменную a

console.log(a); // "INTERNET" — достанем её значение, обратившись по имени 
```

Но есть ограничение: если переменная определена внутри функции, снаружи обратиться к ней не получится.

Скопировать кодJAVASCRIPT

```
function giveMeSomeInternet() {
  const a = 'INTERNET'; // создали переменную a внутри функции giveMeSomeInternet
}

console.log(a); // ReferenceError: a is not defined 
```

Это произойдёт из-за областей видимости_._ Область видимости — правила, которыми руководствуется движок, когда ищет переменную или функцию по имени (идентификатору).

## Правила поиска переменной

Когда вы обращаетесь к переменной, движок ищет её, руководствуясь двумя правилами.

**Первое правило.** Если идентификатор создан внутри функции, обратиться к нему снаружи нельзя.

Скопировать кодJAVASCRIPT

```
function findBatteries() {
  const batteriesNumber = 8;
  сonsole.log(batteriesNumber); // 8
}

console.log(batteriesNumber); // batteriesNumber is not defined

findBatteries(); // 8

console.log(batteriesNumber); // batteriesNumber is not defined 
```

**Второе правило.** Если обратиться к идентификатору из функции, движок сначала поищет идентификатор в теле этой функции. Если не найдёт — начнёт искать снаружи.

Скопировать кодJAVASCRIPT

```
let batteriesNumber = 12;
let batteriesInTetris = 4;

function findBatteries() {
  const batteriesNumber = 8;

  /* внутри функции есть идентификатор batteriesNumber
  именно это значение оказывается в консоли */
  console.log(batteriesNumber); // 8

  /* внутри функции такого идентификатора нет,
  поэтому движок взял значение из кода снаружи */
  console.log(batteriesInTetris); // 4
} 
```

Проведём аналогию. Если человек потерялся, поисково-спасательный отряд ЛизаАлерт ищет его сначала там, где он в последний раз был и часто бывал, а лишь затем постепенно расширяет зону поиска. Первое место поиска — локальная область видимости, последующее — глобальная область видимости. Надеемся, эта тема не сильно вас запутала, и вам не придётся искать свою мотивацию после этого урока.

## Глобальная область видимости

Область видимости вне любых функций называется глобальной. Идентификаторы, определённые в ней, видны везде:

Скопировать кодJAVASCRIPT

```
/* script.js */

/* Здесь глобальная область видимости */
const a = 'Internet';

function callMe() {
    /* А здесь область видимости функции callMe */
    console.log(a + 8000); // возьмёт a из глобальной области
}

function callMeToo() {
  console.log(a + 9000); // тоже возьмёт a из глобальной области
}

callMe(); // Internet8000
callMeToo(); // Internet9000 
```

Переменную называют глобальной, если она объявлена в глобальной области видимости, и локальной — если внутри функции:

Скопировать кодJAVASCRIPT

```
/* script.js */

// здесь глобальная область видимости

const a = 1; // это глобальная переменная

function callMe() {
  // а здесь область видимости функции callMe

  let b = 2; // это локальная переменная функции callMe
} 
```

## Вложенные области видимости

Области видимости «вкладываются» друг в друга:

Скопировать кодJAVASCRIPT

```
const a = 1;

function callMe() {
  const b = 2;

// функция callMeToo вложена в CallMe
  function callMeToo() {
        const c = 3;

    console.log(a);
    console.log(b);
    console.log(c);
  }

  callMeToo();
}

callMe();

// 1 
// 2
// 3 
```

Если в теле функции `callMeToo` обратиться к идентификатору, движок сначала поищет её внутри `callMeToo`, если не найдёт — будет искать внутри функции `callMe`, и уже затем — в глобальной области видимости.

Вот эти три шага поиска:

![image](https://pictures.s3.yandex.net/resources/ezgif.com-gif-maker_1_1587231375.gif)

_Порядок поиска переменных: сначала внутри `callMeTo`, потом внутри `callMe`, затем в глобальной области видимости._

А теперь представьте, что внутри и снаружи функции лежат одинаковые идентификаторы. Что будет тогда? Расскажем в следующем уроке.