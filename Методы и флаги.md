[[JavaScript]]

Регулярные выражения позволяют выполнять очень сложные алгоритмы поиска. Чтобы уметь эти алгоритмы составлять, нужно изучить синтаксис регулярных выражений — так же, как вы учили синтаксис JavaScript.

На поиск влияют три сущности:

- Спецсимволы — содержатся в самóм регулярном выражении и позволяют тоньше задать поиск. Например, искать в тексте сразу «Яндекс» и «Yandex».
- Методы — определяют, что нужно делать, когда строка найдена: заменить её или сообщить, где произошло совпадение.
- Флаги — кастомизируют работу метода (увеличивают возможности). Например, выставив флаг, можно найти все совпадения с регуляркой или только одно.

Таким образом: спецсимволы определяют, что искать; методы — что делать; а флаги — как делать.

## Методы работы с регулярными выражениями

Все методы для работы с регулярными выражениями ищут текст в строке, а различаются только назначением.

Есть тонкость. Методы для работы с регулярными выражениями бывают двух типов:

1. Методы строк. Их вызывают как метод строки:
    
    Скопировать кодJAVASCRIPT
    
    ```
     const regex = /л/;
     const word = 'солнце';
    
     word.match(regex); // [ "л" ] — метод нашёл символ в строке
    
     /* match — строковый метод. Поэтому мы вызываем его
     как метод строки, а регулярное выражение передаём как аргумент. */
      
    ```
    
2. Методы регулярных выражений. Их вызывают как метод регулярки:
    
    Скопировать кодJAVASCRIPT
    
    ```
     const regex = /т/;
     const word = 'лестница';
    
     regex.test(word); // true — метод подтвердил, что в строке есть совпадение
    
     /* test — метод объекта RegExp. Поэтому мы вызываем его
     как метод переменной regExp и передаём строку как аргумент. */
      
    ```
    

Запутаться тут очень легко. Поэтому будем писать имена методов вместе с объектом, в который они записаны: `String.match` и `RegExp.test`.

Пойдём от простого к сложному: рассмотрим один метод и на нём покажем работу всего остального.

### Метод `String.match`

Этот метод мы применяли в прошлом уроке. `String.match` нужен для поиска совпадений: им вы можете проверить, есть ли слово в тексте, и посчитать, сколько раз оно встречается.

Метод `String.match` принимает один аргумент — регулярное выражение. Если найти строку удалось, `String.match` вернёт массив с тем, что нашёл:

Скопировать кодJAVASCRIPT

```
const regex = /сс/;
const word = 'рассчитывать';

word.match(regex); // [ "сс" ] 
```

Если символ найти не удалось, `String.match` вернёт `null`. Обратите внимание: не пустой массив, а именно `null`.

Скопировать кодJAVASCRIPT

```
const regex = /сс/;
const word = 'расчёт';

word.match(regex); // null 
```

Метод `String.match` можно настроить: например, заставить его считать все совпадения в тексте, а не только первое. Для такой настройки и нужны флаги.

## Флаги

Флаг — символ, который стоит в регулярном выражении в самом конце (после слеша) и задаёт настройки поиска. Всего их шесть: `g`, `i`, `m`, `u`, `y`, `s`. В регулярном выражении флагов может быть несколько, и они могут идти в любом порядке.

Регулярное выражение с флагом выглядит так:

Скопировать кодJAVASCRIPT

```
const regex1 = /смысл жизни/g; // здесь мы установили флаг g
const regex2 = /соль/gi; // тут установлены флаги g и i 
```

Из них важно знать три: `g`, `i`, `m`. В этом уроке мы разберём их.

### Флаг `g`

Если установить флаг `g`, мы будем искать все совпадения, а не только первое:

Скопировать кодJAVASCRIPT

```
const regex = /с/;
const regexGlobal = /с/g;
const word = 'искусство';

word.match(regex); // [ "с" ]
word.match(regexGlobal); // [ "с", "с", "с" ]; 
```

### Флаг `i`

Если поставить флаг `i`, поиск не будет различать строчных и прописных букв:

Скопировать кодJAVASCRIPT

```
const str = 'Вильгельм Конрад Рентген стал лауреатом Нобелевской премии в 1901 году.'

const regex = /рентген/;
const regexIgnore = /рентген/i;

str.match(regex); // null
str.match(regexIgnore); // [ "Рентген" ] 
```

### Флаг `m`

Флаг `m` сработает, только если мы используем определённые спецсимволы, которых вы пока не знаете. Мы сначала разберём эти спецсимволы, а потом вернёмся к m.

### Флаг `u`

Оставшимися тремя флагами `u`, `y` и `s` пользуются довольно редко.

Если поставить флаг `u`, можно искать символы по их номеру в Юникоде.

Чтобы найти символ по коду, используют такую конструкцию: `\u{номер символа}`.

Например:

Скопировать кодJAVASCRIPT

```
const str = '& — это амперсанд. Его номер в таблице Юникод: 26';
const regex = /\u{26}/; // здесь флаг u не установлен
const regexUnicode = /\u{26}/u; // а здесь — установлен

str.match(regex); // null
str.match(regexUnicode); // ["&"] 
```

### Флаг `y`

Флаг `y` позволяет проверить, есть ли искомая строка в строго определённом месте текста. Работает так: вы включаете флаг `y` при составлении регулярного выражения. А затем записываете в свойство `lastIndex` этого регулярного выражения номер символа, с которого нужно проверять:

Скопировать кодJAVASCRIPT

```
const fuelUp = 'заправляемся, потом платим';
let regex = /платим/y;

regex.lastIndex = 0; 
fuelUp.match(regex); 
// null. Первое слово «заправляемся», а не «платим»

regex.lastIndex = 20;
fuelUp.match(regex); // [ "платим" ]

/* Интересно, что в разных браузерах информация
строковых методов выводится в разном объёме:
где только индекс, а где также исходная строка и скобочные группы */ 
```

## Коротко о методах и флагах

Ваши инструменты для работы с регулярными выражениями — это спецсимволы, методы и флаги. Спецсимволы настраивают поиск, методы определяют, что делать, когда строка найдена. Флаги же кастомизируют поиск.

В этом уроке вы познакомились с методом `String.match` — он ищет строку и возвращает массив с найденными значениями. Как именно он будет искать, определяют флаги. То есть флаги влияют на поведение всего шаблона.

Основных флага три: `g`, `i` и `m`. Флаг `g` настраивает глобальный поиск: будет найдено не только первое совпадение с регулярным выражением, а вообще все совпадения.

Флаг `i` позволяет искать слова без учёта регистра. Если этот флаг включён, поиск не будет различать слова «Гриб» и «гриб».

О третьем флаге `m` расскажем позже. Выполняйте задания и переходите к следующему уроку. Там подробно поговорим о спецсимволах.