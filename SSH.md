[[GITHUB]]

## Что такое SSH

В сети компьютеры обмениваются данными. Для этого они подключаются друг к другу через сетевые протоколы. Это похоже на автомагистрали: платные и бесплатные.

Представьте, что вы хотите доставить посылку из одного города в другой. На бесплатной автомагистрали дороги не очень хорошие, ехать долго — да и сохранность посылки под вопросом. На платную автомагистраль пускают по пропускам, зато есть гарантия, что посылка доедет целой.

Транспортный протокол SSH — та самая «платная магистраль». Через протокол можно получить данные с удалённого компьютера или их на него записать. Протокол шифрует трафик и поэтому безопасен. Сейчас вам нужен SSH для взаимодействия только с «Гитхабом», в дальнейшем — и с удалённым сервером.

Чтобы выехать на платную магистраль, нужно создать пропуск. В SSH это пара ключей.

## Проверка наличия SSH-ключа

Убедитесь, что у вас ещё нет пропуска.

По умолчанию все SSH-ключи хранятся в домашней директории вашего компьютера:

Скопировать кодBASH

```
ls -al ~/.ssh
# перешли в домашнюю директорию и посмотрели список созданных ключей 
```

Если папка пустая или её нет, то всё хорошо.

Если есть с похожим названием, SSH-ключи уже создавались:

-   id_dsa.pub
-   id_ecdsa.pub
-   id_ed25519.pub
-   id_rsa.pub

Если вы не создавали их, удалите все эти файлы.

## Генерация SSH-ключа

1.  Сгенерируйте в терминале приватный и публичный ключи. У публичного расширение `.pub`, у приватного расширения нет. Оба ключа сохранятся на вашем компьютере. Публичный нужен для привязки к «Гиту». В строке e-mail обязательно укажите адрес почты, которая привязана к «Гитхабу»:
    
    Скопировать кодBASH
    
    ```
    ssh-keygen -t rsa -b 4096 -C "students-yandex@yandex.com"
          
    ```
    
    После ввода отобразится сообщение:
    
    Скопировать кодBASH
    
    ```
    > Generating public/private rsa key pair.
          
    ```
    
2.  Укажите место хранения ключей. Простой вариант — сделать домашний каталог пользователя путём по умолчанию. Для этого нажмите Enter:
    
    macOS
    
    Скопировать кодBASH
    
    ```
    > Enter a file in which to save the key (/Users/you/.ssh/id_rsa): [Press enter]
          
    ```
    
    Windows
    
    Скопировать кодBASH
    
    ```
    > Enter a file in which to save the key (C:\Users\<имя_пользователя>\.ssh\):[Press enter]
          
    ```
    
    Теперь в указанной директории появится пара ключей.
    
3.  Создайте пароль доступа к SSH-ключу. Его нужно вводить при каждом соединении через протокол. Поэтому запомните его или запишите:
    
    Скопировать кодBASH
    
    ```
    > Enter passphrase (empty for no passphrase): [Type a passphrase]
    > Enter same passphrase again: [Type passphrase again]
          
    ```
    

Но вы можете оставить поле пустым, чтобы никогда не вводить пароль. Для этого нажмите Enter:

4.  Запустите фоном команду `ssh-agent`. Она ищет SSH-ключ на вашем компьютере:
    
    Скопировать кодBASH
    
    ```
    eval $(ssh-agent -s)
          
    ```
    
5.  Привяжите приватный ключ к `ssh-agent`. Тогда вы сможете не вводить пароль при каждой работе с репозиторием:
    
    Скопировать кодBASH
    
    ```
    ssh-add ~/.ssh/id_rsa
          
    ```
    

## Привязка SSH-ключа к аккаунту GitHub

1.  Скопируйте публичный ключ в буфер обмена:
    
    macOS
    
    Скопировать кодBASH
    
    ```
    pbcopy < ~/.ssh/id_rsa.pub
    # Скопировать содержимое ключа в буфер обмена
          
    ```
    
    Windows
    
    Скопировать кодBASH
    
    ```
    clip < ~/.ssh/id_rsa.pub
    # Скопировать содержимое ключа в буфер обмена
          
    ```
    
    Если clip не сработает, найдите скрытую папку `.ssh`, откройте файл `id_rsa.pub` в любом текстовом редакторе. Скопируйте его содержимое в буфер обмена.
    
2.  Перейдите на «Гитхаб» и откройте настройки аккаунта:
    

![image](https://pictures.s3.yandex.net/resources/Frame_259_1588171978.png)

_Настройки аккаунта на «Гитхабе»_

3.  В левом меню выберите пункт ″SSH and GPG keys″:

![image](https://pictures.s3.yandex.net/resources/Frame_260_1588173101.png)

_Выбор настройки ″SSH and GPG keys″_

4.  В открывшейся вкладке выберите ″New SSH key or Add SSH key″:

![image](https://pictures.s3.yandex.net/resources/Frame_2601_1588173162.png)

_Выбор подпункта ″New SSH key or Add SSH key″_

5.  В поле ″Title″ напишите заголовок. Например, ″Personal key″.
6.  В поле ″key″ скопируйте ваш ключ из буфера обмена:

![image](https://pictures.s3.yandex.net/resources/Frame_261_1588173179.png)

_Копия SSH-ключа из буфера обмена_

7.  Нажмите кнопку ″Add SSH key″:

![image](https://pictures.s3.yandex.net/resources/Frame_262_1588173199.png)

_Персональный SSH-ключ добавлен_

Всё, ваш ключ привязан к «Гитхабу». Если вы установили пароль для SSH-ключа, для работы с репозиторием его придётся вводить.


# Шпаргалка

Краткая шпаргалка по пройденному уроку:

`ls -al ~/.ssh` — проверить уже созданные SSH-ключи.

`ssh-keygen -t rsa -b 4096 -C` — сгенерировать пару SSH-ключей.

`ssh-add ~/.ssh/id_rsa` — добавить приватный ключ к SSH-агенту.

Чтобы шпаргалка всегда была под рукой, [скачайте её в PDF](https://code.s3.yandex.net/web-developer/cheat-sheet/cheat-sheet-git-tools-sprint-5.pdf).