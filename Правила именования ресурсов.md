[[Продвинутый JavaScript]]

Концепцию REST API предложил Рой Филдинг в 2000 году. В его диссертации понятие «ресурс» определяется так:

_Ключевая абстракция информации в REST — ресурс. Ресурсом может быть документ, изображение, пост в блоге, пользователь социальной сети — всё, к чему можно обратиться при HTTP-запросе. Ресурс — концептуальное отображение какого-то объекта или набора объектов, а не сами эти объекты._

Для взаимодействия с ресурсами их необходимо как-то именовать. Чем понятнее имена, тем проще разобраться в API. Здорово, когда по названию ресурса можно понять, чтó он содержит.

В этом уроке расскажем о правилах именования ресурсов в REST.

### Ресурсы — существительные

Почти всегда ресурсы именуют существительными во множественном числе:

Скопировать код

```
https://nomoreparties.co/users
https://nomoreparties.co/cards 
```

Реже применяют единственное число:

Скопировать код

```
https://nomoreparties.co/users/{user-id}/profile 
```

Иногда в качестве имени можно выбрать глагол. Но такое имя крайне редко бывает удачным:

Скопировать код

```
https://nomoreparties.co/users/{user-id}/cart/checkout 
```

### Слеш для иерархии

Слеш в URL используется для указания иерархии:

Скопировать код

```
GET /users/{user-id}/posts 
```

### «Висящий» слеш — зло

Висящий слеш в конце URL не добавляет информации, поэтому лучше обойтись без него:

Скопировать код

```
GET /users/{user-id}/posts/
// Не надо так 
```

### Дефисы вместо пробелов

Поскольку пробелов в URL быть не может, их заменяют либо дефисами, либо нижними подчёркиваниями. Дефисы лучше, потому что:

-   на некоторых устройствах нижнее подчёркивание может выйти за базовую линию строки, и его вовсе будет не видно;
-   несколько нижних подчёркиваний сливаются в одно.

Скопировать код

```
// делайте так:

GET /users/{user-id}/user-devices

// а не так:

GET /users/{user-id}/user_devices 
```

### Только строчные

URL чувствительны к регистру. Чтобы потом не думать, в каком регистре назван ресурс, лучше использовать строчные символы:

Скопировать код

```
// это разные URL:

/users/{user-id}/posts
/users/{user-id}/Posts 
```

### Не дублировать в именовании HTTP-метод

Для указания действия, которое вы совершаете над ресурсом, нужно использовать HTTP-методы:

Скопировать код

```
// получить пользователей

GET /users

// создать пользователя

POST /users 
```

Но к ним не стоит добавлять действия, потому что в названиях методов оно уже указано. Поэтому следующие конструкции в названии метода дублируют значение метода:

Скопировать код

```
GET /get-users
POST /create-user 
```

GET-запрос сам по себе обозначает действие, как и POST. К тому же, один ресурс может отвечать как на POST, так и на GET-запросы.

Вы пишете приложение, которое во время карантина и пропусков помогает людям выйти на улицу и... выгулять чужую собаку. Приложение должно получать все данные обо всех собаках из нашей базы. Запрос к какому эндпоинту подойдёт для этого лучше всего?

GET /users

Правильный ответ

GET /dogs

GET /dogs — вот они! Все пушистики будут тут.

GET /dogs/1

POST /dogs

Нам нужно добавить информацию о новой собаке на сервер, какой запрос лучше использовать для этого?

PUT /dogs/1

Тоже правильный ответ

POST /dogs

Верно! С помощью этого запроса можно создать нового дружочка!

Неправильный ответ

POST /dogs/1

POST /dogs/1 — подойдёт для создания чего-то нового у конкретной собаки. Например, новой миски для корма.

PUT /dogs

Новая собака создана и её id — 42. Каким запросом можно добавить информацию о ней?

PATCH /dogs

Правильный ответ

PATCH /dogs/42

Верно! Запросом PATCH /dogs/42 можно, например, добавить собаке в личные вещи полотенце для лап.

PUT /dogs/42

PUT /dogs

Junior-backend разработчик задался вопросом, как ему назвать эндпоинт для получения всех заводчиков собак из базы данных. Что посоветуете?

GET /get-owners

Правильный ответ

GET /owners

GET /owners — очень по REST-у!

GET /owner

GET /owners/all