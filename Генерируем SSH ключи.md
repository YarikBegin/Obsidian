[[GITHUB]]

Представьте, что разработчик Василий сумел создать свой стартап, который принёс очень много денег. Василий взял эти деньги и положил в ячейку в банке. Через полгода Василий решил подарить Людмиле домик в LA и пошёл снимать деньги с банковской ячейки. Естественно, сотрудники банка не отдадут деньги Василию пока он не подтвердит, что он — это он. Самый простой способ сделать это — предоставить паспорт.

Так же и с кодом. GitHub — сервис, где код хранится в «банковских ячейках» — репозиториях. И когда этот код пытаются забрать или внести в него изменения — GitHub должен убедиться, что у компьютера, с которого происходит обращение к сервису, есть права на внесение изменений или чтение данных. Чтобы завести «паспорт» на компьютере, с которого будет происходить взаимодействие с GitHub, нужно создать SSH-ключ и добавить его в аккаунт GitHub. О SSH и его ключах поговорим в этом уроке.

## Что такое SSH

В сети компьютеры обмениваются данными. Для этого они подключаются друг к другу через сетевые протоколы. Это похоже на автомагистрали: платные и бесплатные.

Представьте, что вы хотите доставить посылку из одного города в другой. На бесплатной автомагистрали дороги не очень хорошие, ехать долго — да и сохранность посылки под вопросом. На платную автомагистраль пускают по пропускам, зато есть гарантия, что посылка доедет целой.

Транспортный протокол SSH — та самая «платная магистраль». Через протокол можно получить данные с удалённого компьютера или их на него записать. Протокол шифрует трафик и поэтому безопасен. Сейчас вам нужен SSH для взаимодействия только с «Гитхабом», в дальнейшем — и с удалённым сервером.

Чтобы выехать на платную магистраль, нужно создать пропуск. В SSH это пара ключей.

## Проверка наличия SSH-ключа

Убедитесь, что у вас ещё нет пропуска.

По умолчанию директория с SSH-ключами находится в домашней директории пользователя, перейдём туда:

Скопировать кодBASH

```
# Переход в домашнюю директорию:
cd ~ 
```

Обычно SSH-ключи находятся в директории `.ssh/`, проверить наличие этой директории и файлов в ней можно с помощью такой команды:

Скопировать кодBASH

```
# Вывести список созданных ключей:
ls -la .ssh/

# Для более структурированного вывода вы можете добавить команде пару параметров:
ls -lAFho .ssh/ 
```

Если папка пустая или её нет, то всё хорошо.

Если есть файлы с похожим названием, SSH-ключи уже создавались:

-   id_dsa.pub
-   id_ecdsa.pub
-   id_ed25519.pub
-   id_rsa.pub

Если вы не создавали их, удалите все эти файлы.

## Генерация SSH-ключа

1.  Сгенерируйте в терминале приватный и публичный ключи. У публичного расширение `.pub`, у приватного расширения нет. Оба ключа сохранятся на вашем компьютере. Публичный нужен для привязки к «Гиту». В строке e-mail обязательно укажите адрес почты, которая привязана к «Гитхабу»:
    
    Скопировать кодBASH
    
    ```
     ssh-keygen -t ed25519 -C "praktikum.student@yandex.ru"
      
    ```
    
    Если у вас появилось сообщение об ошибке, скорее всего ваша система не поддерживает алгоритм шифрования `ed25519`. Всё нормально, в таком случае достаточно воспользоваться другим алгоритмом:
    
    Скопировать кодBASH
    
    ```
     ssh-keygen -t rsa -b 4096 -C "praktikum.student@yandex.ru"
      
    ```
    
    После ввода отобразится сообщение:
    
    Скопировать кодBASH
    
    ```
     > Generating public/private rsa key pair.
      
    ```
    
2.  Укажите место хранения ключей. Простой вариант — сделать домашний каталог пользователя путём по умолчанию. Для этого нажмите Enter:
    
    macOS
    
    Скопировать кодBASH
    
    ```
     > Enter a file in which to save the key (/Users/you/.ssh/id_rsa): [Press enter]
      
    ```
    
    Windows
    
    Скопировать кодBASH
    
    ```
     > Enter a file in which to save the key (C:\Users\<имя_пользователя>\.ssh\):[Press enter]
      
    ```
    
    Теперь в указанной директории появится пара ключей.
    
3.  Создайте пароль доступа к SSH-ключу. Его нужно вводить при каждом соединении через протокол. Поэтому запомните его или запишите:
    
    Скопировать кодBASH
    
    ```
     > Enter passphrase (empty for no passphrase): [Type a passphrase]
     > Enter same passphrase again: [Type passphrase again]
      
    ```
    
    Когда вы будете вводить пароль, символы не будут появляться на экране, но на самом деле, пароль при этом вводится. Но вы можете оставить поле пустым, чтобы никогда не вводить пароль. Для этого нажмите Enter:
    
4.  Запустите фоном команду `ssh-agent`. Она ищет SSH-ключ на вашем компьютере:
    
    Скопировать кодBASH
    
    ```
     eval $(ssh-agent -s)
      
    ```
    
5.  Привяжите приватный ключ к `ssh-agent`. Тогда вы сможете не вводить пароль при каждой работе с репозиторием. Обратите внимание, что к агенту нужно привязывать именно **приватный** ключ — это файл без расширения `.pub`:
    
    Скопировать кодBASH
    
    ```
         # Выбор команды зависит от алгоритма шифрования
         # для ed25519:
         ssh-add ~/.ssh/id_ed25519
         # для rsa:
         ssh-add ~/.ssh/id_rsa
      
    ```
    

## Привязка SSH-ключа к аккаунту GitHub

1.  Скопируйте публичный ключ в буфер обмена:

**macOS**

Скопировать кодBASH

```
# Скопировать содержимое ключа в буфер обмена
# для ed25519:
pbcopy < ~/.ssh/id_ed25519.pub
# для rsa:
pbcopy < ~/.ssh/id_rsa.pub 
```

**Windows**

Скопировать кодBASH

```
# Скопировать содержимое ключа в буфер обмена
# для ed25519:
clip < ~/.ssh/id_ed25519.pub
# для rsa:
clip < ~/.ssh/id_rsa.pub 
```

Если clip не сработает, найдите скрытую папку `.ssh`, откройте файл `id_rsa.pub` или `id_ed25519.pub` в любом текстовом редакторе. Скопируйте его содержимое в буфер обмена.

2.  Перейдите на «Гитхаб» и откройте настройки аккаунта:
3. В левом меню выберите пункт ″SSH and GPG keys″:
4. В открывшейся вкладке выберите ″New SSH key or Add SSH key″:
5. 2.  В поле ″Title″ напишите заголовок. Например, ″Personal key″.
3.  В поле ″key″ скопируйте ваш ключ из буфера обмена:
4. Нажмите кнопку ″Add SSH key″:
5. 