[[JavaScript]]

Вот чеклист для проверки своего проекта. Проходитесь по нему перед тем, как вашим кодом начнут пользоваться реальные люди.

### ✅ Настройте заголовки ответа

Есть ряд заголовков, отвечающих за разные аспекты безопасности: вы уже знакомы с Content-Security-Policy, которые позволяют ограничить источники скриптов и других ресурсов.

Заголовки безопасности можно проставлять автоматически — для этого есть модуль Helmet. Нужно установить его, импортировать и подключить как мидлвэр:

Скопировать кодJAVASCRIPT

```
const helmet = require('helmet');

app.use(helmet()); 
```

Документация Helmet: [https://www.npmjs.com/package/helmet](https://www.npmjs.com/package/helmet)

### ✅ Проверяйте, какие данные присылает пользователь

Валидируйте данные на входе и заменяйте управляющие символы мнемониками. Если фронтенд вставляет их в сайт небезопасно, пользуйтесь `escape-html`.

### ✅ Задумывайтесь о том, где хранятся данные на клиенте

LocalStorage удобен и прост: он отлично подойдёт для хранения данных, которые нет нужды скрывать. Но к localStorage есть доступ из JavaScript-кода, и это поведение нельзя запретить. Поэтому для хранения секретных данных лучше подходят httpOnly куки.

### ✅ Помните о CSRF

Если ваш сервис при авторизации запросов опирается на автоматическую отправку кук браузером, реализуйте хотя бы простейшую защиту от CSRF. В этом поможет опция same site.

### ✅ Будьте готовы к брутфорсу и DDоSу

Чтобы защититься от множества автоматических запросов, воспользуйтесь специальным мидлвэром — `express-rate-limit`. Он ограничивает количество запросов с одного IP-адреса в единицу времени. После установки его можно импортировать, сконфигурировать и подключить:

Скопировать кодJAVASCRIPT

```
const express = require('express');
const rateLimit = require('express-rate-limit');

const app = express();

const limiter = rateLimit({
  windowMs: 15 * 60 * 1000, // за 15 минут
  max: 100 // можно совершить максимум 100 запросов с одного IP
});

// подключаем rate-limiter
app.use(limiter); 
```

Документация модуля `express-rate-limit`: [https://www.npmjs.com/package/express-rate-limit](https://www.npmjs.com/package/express-rate-limit).

### ✅ Проверьте зависимости

Запускайте команду `npm audit`, прежде чем выкатывать проект в продакшн. Также настройте Security Alert на платформе, где храните код.

### ✅ Храните секреты

Храните ключи в переменных окружения. Доступ к файлу .env должен быть у минимально возможного количества людей, поэтому не храните его в репозитории проекта.

### ✅ Не останавливайтесь

Безопасность — неисчерпаемая тема. Крупные компании отдельно нанимают специалистов по информационной безопасности, чтобы защитить свои сервисы от атак. Это логично, ведь у таких компаний очень высокие ставки.

В следующем спринте мы ещё раз коснёмся безопасности. Но также мы рекомендуем не останавливаться на программе нашего курса и изучать веб-безопасность вместе с другими сферами веб-разработки.