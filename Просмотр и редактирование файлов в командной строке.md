[[Как работать в командной строке быстро]]


В предыдущем уроке мы рассказывали о том, как копировать и перемещать файлы. Иными словами, в предыдущем уроке мы управляли расположением файлов.

В этом уроке пойдём на уровень ниже — на уровень содержимого файлов.

## Просмотр содержимого `cat`

Команда `cat` выводит в терминал содержимое текстового файла. После команды указывают имя файла, содержимое которого нужно просмотреть:

Скопировать кодBASH

```
cat index.html
cat ~/Documents/file.txt 
```

Команда `cat` работает только с файлами с текстом. Вывести этой командой, скажем, изображение, не выйдет.

Откройте редактор кода (скажем, VSCode) и откройте в нём папку проекта `third-project`. Добавьте в файл `index.html` простую разметку:

Скопировать кодBASH

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>

</body>
</html> 
```

Вернитесь в терминал. Перейдите в папку проекта `third-project`. Введите команду `cat` и имя файла — `index.html`.

Скопировать кодBASH

```
cat index.html
# выведем в окно терминала содержимое index.html

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>

</body>
</html>    
```

У команды `cat` есть настройки, которые указывают ключами. Ключ `-n` включает нумерацию строк:

Скопировать кодHTML

```
cat -n index.html
# выведем в окно терминала содержимое index.html
   
1 <!DOCTYPE html>
2 <html lang="en">
3 <head>
4  <meta charset="UTF-8">
5  <title>Document</title>
6 </head>
7 <body>
8        
9 </body>
10 </html> 
```

Другие настройки команды `cat` посмотрите [в официальной документации Bash](https://www.gnu.org/software/bash/manual/bash.pdf).

## Vim. Текстовый редактор, из которого не выйти

Команда `cat` бывает полезна. Но просмотра файлов, как правило, недостаточно. Мы хотим изменять эти файлы: дописывать или удалять их. А для этого нужна программа — редактор кода. И в Bash такая программа есть — текстовый редактор Vim.

Принципы работы Vim непривычны. Он работает в одном из трёх режимов: командный режим, режим редактирования и режим просмотра. Рассмотрим каждый.

**Вход в Vim.** Инициализируйте `git` в проекте `third-project` командой `git init`. Затем сохраните файлы и сделайте коммит, но без ключа `-m` и комментария. Вы увидите такой экран:

![image](https://pictures.s3.yandex.net/resources/Screenshot_2020-01-31_at_14.00.39_1583059356.png)

Vim открыл текстовый файл с информацией о коммите. Попробуйте оставить комментарий к коммиту первой строчкой и нажать Enter. Получится что-то вроде этого:

![image](https://pictures.s3.yandex.net/resources/Screenshot_2020-01-31_at_14.03.42_1583059400.png)

Дело в том, что Vim открыт в режим просмотра. Чтобы снова вводить команды, нужно перейти в командный режим. Не зная, как это делать, довольно легко запутаться и застрять в редакторе кода. В эту ситуацию начинающие разработчики попадают так часто, что даже появился мем, что из Vim невозможно выйти. В прошлом году в Vim застряли более миллиона человек. На Stack Overflow даже есть [тред, посвящённый этой проблеме](https://stackoverflow.com/questions/11828270/how-do-i-exit-the-vim-editor). Довольно забавно читать к этому треду комментарии.

Чтобы не попасть в ловушку Vim, изучим базовые возможности.

![image](https://pictures.s3.yandex.net/resources/Screenshot_2020-01-31_at_14.19.09_1583059518.png)

_Тред открыт 7 лет назад, но последнее обновление было 22 дня назад. Проблема не устаревает_

### Как выйти из Vim

Нажмите `esc` — так вы переключитесь в командный режим. Затем введите `:q!` и нажмите Enter. Так вы сможете выйти из документа, не сохраняя изменения.

Наша задача — оставить комментарий к коммиту и сохранить файл. Для этого нужно перейти в режим редактирования. Введите `git commit` ещё раз. Затем нажмите `i` — так вы перейдёте в режим редактирования. Напишите комментарий к коммиту. Затем переключите режим на командный клавишей `esc`. Введите команду `:wq` и нажмите `Enter`. Так вы сохраните файл и выйдете из Vim.