[[React]]

### Подключение «Реакта»

Пришло время подключить «Реакт» и написать первый код с его использованием.

Вот упрощённая версия примера [с сайта «Реакта»](https://ru.reactjs.org/docs/getting-started.html):

Скопировать кодHTML

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
<div id="root"></div>
<script type="text/jsx">
  ReactDOM.render((
    <h1>Hello, world!</h1>
  ), document.querySelector('#root'));
</script>
</body>
</html> 
```

Разберём подробно, что здесь происходит.

В первую очередь подключаем два скрипта: `react` и `react-dom`. Такое разделение существует, потому что основная библиотека `react` универсальна и предназначена не только для веб-проектов. Работая с браузерными приложениями, мы всегда будем подключать сразу две библиотеки: основную и ту, что отвечает за работу с DOM. На этапе разработки используются сборки с расширением `.development.js`: они содержат дополнительные инструменты для отладки кода на «Реакте».

JSX — «синтаксический сахар», поэтому следующим шагом мы подключаем «Бабель». Он занимается тем, что переводит JSX в стандартный синтаксис JavaScript, который может выполняться в любом браузере. В одном из следующих уроков мы разберём, что на самом деле находится «под капотом» JSX, а пока просто укажем «Бабелю», какой код нужно транспилировать, добавив атрибут `type="text/jsx"` у тега `script`.

Одна из основных функций в «Реакте» — `ReactDOM.render`. С неё начинается любой проект. Эта функция обрабатывает JSX и отрисовывает результат в DOM. Первым аргументом она принимает сам JSX-код, а вторым — указатель на DOM-элемент, в который необходимо вставить полученный результат.

Создайте файл `index.html` с кодом из примера выше и попробуйте запустить его в браузере.

### Динамический интерфейс

Самое интересное начинается, когда в приложении появляется интерактивность. Вспомним пример с событием клика из предыдущего урока.

Здесь и далее мы будем приводить содержимое `<script type="text/jsx"></script>`.

Скопировать кодJAVASCRIPT

```
// Переменная, отвечающая за состояние приложения
let isClicked = false;

// Функция, отвечающая за отрисовку интерфейса
// с учётом текущего состояния isClicked
function renderAll() {
  ReactDOM.render((
    <div>
      <div id="myElement">Click me!</div>

      <div id="myAnotherElement" className={isClicked ? 'active' : ''}>
        <div id="myText">
          {isClicked ? 'It was clicked!' : 'Waiting for click...'}
        </div>
      </div>
    </div>
  ), document.querySelector('#root'));
}

// Вызов первичной отрисовки при открытии страницы
renderAll();

// При наступлении события мы изменяем переменную состояния
// и заново вызываем отрисовку
const element = document.querySelector('#myElement');
element.addEventListener('click', () => {
  isClicked = true;
  renderAll();
}); 
```

В этом примере мы добавили функцию `renderAll`, чтобы вызывать отрисовку «Реакта» не только при первом открытии страницы, но и повторно при любом изменении состояния приложения: например, после клика. Эта функция содержит в себе вызов функции `ReactDOM.render`, в которую передаётся JSX, зависящий от состояния переменной `isClicked` (а также, как и ранее, указатель на корневой HTML-элемент).

### JSX

Напомним, что JSX представляет из себя «симбиоз» HTML и JavaScript. Чтобы подставить значение из JavaScript в HTML используются фигурные скобки `{}`. Внутри них можно писать любые выражения на JavaScript, возвращающие строки и числа, которые будут подставлены в HTML. Тернарный оператор `?:` используется наиболее часто: он позволяет описать условную логику с двумя и более вариантами.

Поначалу такой код может показаться несколько непривычным: JavaScript переплетается с HTML-подобным JSX. Чтобы лучше организовать код, в следующем уроке мы начнём выделять компоненты с помощью «Реакта».