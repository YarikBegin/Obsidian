[[ООП в интерфейсах. Введение]]

У многих элементов страницы есть общие оформление, структура и функциональность. ООП помогает разработчику спроектировать класс, который станет фабрикой по производству таких однотипных элементов.

Элементы страницы бывают двух видов:

1.  Статические — не меняются после загрузки страницы и хранятся в html-файле. Обычно это логотип в углу страницы или подвал сайта.
2.  Динамические — меняются без перезагрузки страницы из-за действий пользователя и создаются скриптами из файла `index.js`. Так работают чаты: новые сообщения появляются в ленте, старые сообщения пользователь может удалить без обновления страницы.

Если на странице много похожих динамических элементов, их лучше организовать согласно ООП:

-   сначала создадим класс с разметкой динамических элементов,
-   затем этот класс послужит фабрикой по производству однотипных блоков HTML.

Тогда достаточно исправить только один класс, чтобы изменить все однотипные блоки.

## ООП на примере чата

Проджект-менеджер принёс интересную задачу: создать чат для поддержки студентов Практикума. Начнём с простого элемента — карточки сообщения:

![image](https://pictures.s3.yandex.net/resources/Untitled_1589707958.png)

_Пример карточки сообщения_

Сообщения меняются при взаимодействии с пользователем. Он пишет новые сообщения или работает со старыми: удаляет их или сохраняет в «избранное». Поэтому сообщения — динамические элементы страницы и для их отрисовки нужен JavaScript.

Сообщения в чате — повторяющиеся элементы. Каждое из них состоит из текста и фотографии: разное только содержание. Со временем функции сообщений могут расширяться.

Всё это подсказывает, что парадигма ООП хорошо подойдёт для решения задачи. Нам пригодится фабрика по производству однотипных динамичных карточек. Поэтому мы создадим класс, который хранит разметку карточки и наполняет его уникальным содержанием.

Добавим класс в `index.js`:

Скопировать кодJAVASCRIPT

```
class Card {
    // в конструкторе будут динамические данные,
    // для каждого экземпляра свои
    constructor(text, image) {
        // text и image — приватные поля, 
        // они нужны только внутри класса
        this._text = text;
        this._image = image;
    }
}

// создадим экземпляр карточки с уникальным текстом и аватаром пользователя
const card = new Card('Привет! Как дела?', 'userpic.jpg');  
```

Пока конструктор содержит только данные, которые уникальны для каждого сообщения в чате. Позже мы сильно усложним конструктор — этого потребует логика работы класса.

## Работа с шаблоном разметки

Следующая задача — научить класс `Card` возвращать разметку. Такую же задачу вы решали для карточек в проекте Mesto. Тогда функция возвращала DOM-элемент.

В ООП такая функция станет методом класса. Назовём его `_getTemplate`:

Скопировать кодJAVASCRIPT

```
class Card {
    constructor(text, image) {
        this._text = text;
        this._image = image;
    }
    
    _getTemplate() {
        // здесь выполним все необходимые операции, чтобы вернуть разметку
    }
}

const card = new Card('Привет! Как дела?', 'userpic.jpg');  
```

Метод `_getTemplate` — приватный. Мы вызовем его внутри класса, чтобы получить готовую разметку перед размещением на страницу. Так мы отделим логику обработки разметки от логики публикации элемента. Чем более явно разделены функции, тем проще управлять кодом.

Класс получает разметку из `template`-элемента — расположим его в `index.html`:

Скопировать кодHTML

```
<template class="card-template">
  <div class="card">
    <img src="" alt="Аватар пользователя" class="card__avatar">
    <div class="card__text">
      <p class="card__paragraph"><!-- здесь будет текст сообщения --></p>
    </div>
  </div>
</template> 
```

Это делает метод `_getTemplate`.

Скопировать кодJAVASCRIPT

```
_getTemplate() {
  // забираем разметку из HTML и клонируем элемент
    const cardElement = document
    .querySelector('.card-template')
    .content
    .querySelector('.card')
    .cloneNode(true);
    
  // вернём DOM-элемент карточки
    return cardElement;
} 
```

Задача метода `_getTemplate` — вернуть разметку карточки через `return`. Для наполнения данными и размещения карточки на страницы мы используем другие методы.

[Итоговый код на repl.it](https://repl.it/@praktikum/Lesson-1).