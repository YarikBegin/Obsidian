[[Продвинутый JavaScript]]

Первые прототипы интернета появились ещё в 60-е годы. Но чтобы стать популярным, интернету понадобилось ещё 30 лет. Дело в том, что не было интерфейса: каких-то правил, как интернетом пользоваться.

В 1991 году в лаборатории ЦЕРН учёный-физик Тим Бернерс-Ли со своей командой размышляли, как сделать работу с интернетом простой. Они пытались придумать правила, по которым можно было бы организовать коммуникацию между компьютерами в сети. Так появился проект всемирной паутины.

Так что же нужно было придумать, чтобы интернет обрёл свой современный облик?

Поскольку интернет — сеть компьютеров, которые обмениваются данными, эти данные необходимо как-то оформить. Нужно придумать, как представлять информацию в интернете.

Но мало представить информацию, нужно ещё научить компьютеры её отображать. То есть нужно какое-то программное обеспечение, которое позволит прочитать информацию в интернете и показать её пользователю.

Ну и наконец: информацией нужно как-то обмениваться: нужны правила, по которым компьютеры будут отправлять и получать документы.

В итоге Тим Бернерс-Ли вместе с командой придумали:

1.  язык, на котором можно создавать документы в интернете — HTML;
2.  программу для просмотра этих документов — браузер;
3.  единые правила, по которым документы передаются — протокол HTTP.

С первыми двумя пунктами вы уже знакомы. В этой теме расскажем о третьем — протоколе передачи данных HTTP.

## Что такое протокол

Как мы уже сказали, интернет — это сеть из компьютеров, которые обмениваются друг с другом информацией. Чтобы это было возможным, нужно установить какие-то правила: в каком виде данные будут ходить от одного компьютера к другому.

Обмен данными в интернете построен на принципе «запрос — ответ»: браузер формирует запрос, сервер его анализирует и отправляет ответ. Правила, по которым нужно формулировать запросы и ответы, определяет протокол — HTTP.

Проведём аналогию: если вам нужно отправить письмо по почте, вы должны положить его в конверт, написать адрес по определённым правилам, наклеить марку и отнести на почту. Компьютер с сервером тоже обмениваются сообщениями — «письмами». Правила оформления этих писем — и есть протокол HTTP.

## Когда браузер делает запросы

HTTP расшифровывается как Hypertext Transfer Protocol. Он так называется, потому что был придуман для передачи HTML-документов. Но сейчас этот протокол используют для передачи через интернет любых данных.

Когда вы заходите на сайт, браузер отправляет HTTP-запрос на сервер. Тот в свою очередь формирует ответ — HTML-код нужной страницы. Из кода страницы браузер построит DOM-дерево и начнёт отрисовывать сайт.

В коде веб-страницы могут быть ссылки на CSS и JavaScript-файлы, шрифты, изображения. Чтобы загрузить их, браузер сделает соответствующие HTTP-запросы к нужным ресурсам. Когда браузер получит ответы на эти запросы, он сможет отрисовать сайт полностью. Также на сайте может быть JavaScript-код, который тоже будет посылать HTTP-запросы.

Все запросы браузера можно поделить на 4 категории:

1.  запросы HTML-документов;
2.  запросы изображений, CSS, JS и других файлов;
3.  отправка форм встроенным способом с перезагрузкой страницы;
4.  запросы из JavaScript-кода.

Запросы первых двух категорий браузер делает автоматически — вручную их формировать не нужно. С третьей категорией запросов мы познакомимся в восьмом уроке. А четвёртая категория — это запросы, которые делает разработчик из JavaScript кода. В этой теме мы будем работать в основном с ними.

## Формат запроса

Запрос, который формирует браузер, может включать в себя:

-   HTTP-метод: он определяет операцию, которую нужно совершить. Есть несколько методов, самые популярные из них: GET и POST. Первый используют для того, чтобы получить данные с сервера, второй — чтобы их отправить.
-   Путь до ресурса: это часть адреса без имени сайта. Например, в `example.com/hello`, путь — это `/hello`.
-   Версию HTTP протокола, который используется для отправки запроса: например, HTTP/1.1.
-   Заголовки запроса или headers: в них можно передать серверу дополнительную информацию.
-   Тело запроса — есть не у всех запросов. Например, тело POST-запроса — это отправляемые данные.

Вот как выглядит запрос страницы ya.ru:

![image](https://pictures.s3.yandex.net/resources/sprint_9___1__228_1592580217.png)

## Формат ответа

Ответ может включать:

-   Версию HTTP протокола.
-   Код и сообщение ответа. Например «200 OK», если всё в порядке, или «404 Not Found», если запрашиваемый ресурс не найден.
-   Заголовки, содержащие дополнительную информацию для браузера.
-   Тело ответа. Например, при заходе на сайт `yandex.ru` в теле ответа будет HTML-код этой страницы.

При запросе страницы ya.ru ответ выглядит так:

![image](https://pictures.s3.yandex.net/resources/sprint_9___1__226_1592580251.png)

Таким образом, браузер общается с сервером через запросы. Некоторые из них происходят автоматически, другие — можно настроить самостоятельно. Чтобы сделать это, нужно понимать структуру HTTP-запросов. В следующем уроке расскажем, как генерировать запросы к серверу из JavaScript-кода.