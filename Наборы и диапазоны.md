[[JavaScript]]

В прошлом уроке мы говорили о спецсимволах и обратных классах. Они позволяют искать совпадения не с конкретным символом, а с одним из группы. Например, `\d` ищет совпадения с любой цифрой.

В этом уроке расскажем, как такие группы символов можно настраивать самостоятельно. Например, искать совпадения только с цифрами от 3 до 8. Инструменты, которыми мы будем эту настройку проводить, называются наборы и диапазоны.

## Наборы

Наборы позволяют задать группу символов и искать совпадения с одним из них. Например, искать сразу и букву «а», и «б»:

Скопировать кодJAVASCRIPT

```
// Ищем все символы «а» и «б»:
'барабан'.match(/[аб]/g); // [ "б", "а", "а", "б", "а" ] 
```

Чтобы создать набор, нужно перечислить подходящие символы в квадратных скобках:

Скопировать кодJAVASCRIPT

```
const str = '14/03/2018';
const regex = /\d\d\W0[345]\W2018/g; // этот шаблон ищет все дни весны

str.match(regex); 
```

## Диапазоны

Диапазоны позволяют указать промежуток доступных значений. Например, искать только цифры от 5 до 8 или только буквы от «М» до «Р».

Скопировать кодJAVASCRIPT

```
const regex = /[м-р]/gi;

'Марсианин'.match(regex); // [ "М", "р", "н", "н" ] 
```

Диапазон — часть набора. Это два символа, разделённых дефисом.

С числами, например:

Скопировать кодJAVASCRIPT

```
const str = '20/04/2019';
const regex = /\d\d\W0[1-6]\W2019/g; // этот шаблон ищет все дни первого полугодия

str.match(regex); // [ "20/04/2019" ] 
```

Диапазоны можно совмещать с наборами и другими диапазонами:

Скопировать кодJAVASCRIPT

```
const regex = /[a-z0-9\-]/gi; // все латинские буквы, все цифры и дефис
const str = 'В Берлин я летал на boeing 737-800';

str.match(regex).join(''); // "boeing737-800" 
```

## Кириллица

В прошлом уроке говорили о спецсимволе `\w` — он ищет все латинские символы, цифры и нижние подчёркивания. Но с текстами, написанными кириллическими символами, он нам никак не помогает. Зато помогают наборы и диапазоны.

Скопировать кодJAVASCRIPT

```
const regex = /[\wа-я\s]/gi;

/* Ищем всю латиницу и всю кириллицу, все пробелы,
а от знаков препинания избавляемся. */

const str = 'Yandex 2020. Ещё не вечер!';

str.match(regex).join(''); // "Yandex 2020 Ещ не вечер" 
```

Обратите внимание: буква «ё» исчезла. Дело в том, что в таблице символов она стоит обособленно от других кириллических букв. Поэтому, чтобы не терять «ё», дописывайте её в набор:

Скопировать кодJAVASCRIPT

```
const regex = /[\wа-я\sё]/gi;

/* Ищем всю латиницу и всю кириллицу,
а от знаков препинания избавляемся. */

const str = 'Yandex 2020. Ещё не вечер!';

str.match(regex).join(''); // "Yandex 2020 Ещё не вечер" 

// Теперь «ё» не потерялась! 
```

## Исключающие наборы и диапазоны

Мы рассказывали, что у спецсимволов есть обратные классы — они ищут все те символы, которые их антагонист игнорирует.

У наборов и диапазонов тоже есть противоположности — исключающие наборы и диапазоны. Они ищут все символы, кроме тех, что мы им перечислим.

Чтобы сделать набор или диапазон исключающим, перед ним нужно поставить «шляпку» `^` (карет):

Скопировать кодJAVASCRIPT

```
const str = 'Оценки за четверть: 2 3 3 5 2 4 2 3 5';
const regex = /[^1-3]/g;

str.match(regex).join(''); // "Оценки за четверть:    5  4   5"

// картина стала получше, но большие пустоты выдают обман 
```

Обратите внимание: если дефис просто стоит в регулярном выражении, движок не будет его искать. Сам по себе дефис спецсимволом не является.

Однако, если он стоит в наборе между двумя символами, движок начнёт воспринимать это не как набор трёх символов, а как диапазон:

Скопировать кодJAVASCRIPT

```
/[ac-]/; // это набор из трёх символов: a, c и -
/a-c/; // это уже диапазон из трёх символов: a, b и с 
```

Чтобы набор непредвиденно не превращался в диапазон, дефис нужно экранировать:

Скопировать кодJAVASCRIPT

```
/a\-c/; // теперь это набор из a, c и - 
```

Мы рекомендуем всегда экранировать дефис в регулярных выражениях: так можно избежать ошибок. То же самое касается вот этих символов:

- дефис `-`,
- точка `.`,
- плюс `+`,
- круглые скобки `()`,
- карет (шляпка) `^`,
- открывающая квадратная скобка `[`.

Их можно не экранировать в регулярном выражении. Но всё же мы рекомендуем это делать, чтобы не было путаницы.

## Иногда точка — это просто точка

Теперь у вас есть новые инструменты для работы с регулярными выражениями — наборы и диапазоны. Они позволяют задавать группы символов и искать совпадения только с символами из этих групп. Также можно написать исключающий набор или диапазон, чтобы намеренно не искать определённые символы.

Помните, что буква «ё» не входит в диапазон кириллических букв от «а» до «я», поэтому её следует отдельно добавлять в набор вот так: `/а-яё/i`.

Регулярные выражения становятся всё сложнее. Но всё ещё обладают одним значительным недостатком — они фиксированной длины. Пока что мы не можем искать слова с разным количеством букв. Решить эту проблему позволяют квантификаторы. О них мы расскажем в следующем уроке.