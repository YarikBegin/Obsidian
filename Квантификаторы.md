[[JavaScript]]

В прошлом уроке мы говорили о наборах и диапазонах. В этом — поговорим о квантификаторах. Они позволяют искать любое количество повторов. А ещё расскажем, почему квантификаторам не чужды человеческие пороки, и что нам это даёт.

## Основные квантификаторы

Предположим, мы хотим найти слово «свиной», но не помним, сколько в нём букв «н»:

Скопировать кодJAVASCRIPT

```
const str = 'Сколько букв «н» в слове «свиной»?'; 
```

Для такого поиска нам нужно регулярное выражение. Оно ищет строку, которая начинается на «сви», затем идёт одна или две буквы «н», и конец слова: «ой».

### От одного до бесконечности повторений — квантификатор `+`

Решить эту задачу поможет квантификатор `+`. Если поставить плюс после символа, движок ищет все слова, где этот символ встречается один раз или больше:

Скопировать кодJAVASCRIPT

```
const str = 'Правильно писать «свиной», с одной «н»';
const regex = /свин+ой/;

// такое регулярное выражение найдёт оба варианта: и с «н», и с «нн»

str.match(regex); // [ "свиной" ] 
```

### От нуля до бесконечности повторений — квантификатор `*`

Другой квантификатор для поиска повторяющихся символов — это звёздочка (астериск): `*`. Работает почти как плюс, но есть одно отличие. Символ, после которого стоит плюс, обязательно должен быть в строке. То есть плюс как бы говорит движку: «Ищи вот этот символ и после него ещё может быть сколько угодно таких же символов».

Звёздочку же устраивает и полное отсутствие того символа, который перед ней стоит. То есть если звёздочка стоит после символа, этого символа в найденной строке может вовсе не быть:

Скопировать кодJAVASCRIPT

```
const exc = 'экскаватор';
const esc = 'эскалатор';
const regex = /эк*ска[вл]атор/; // буква "к" может встречаться, а может и не встречаться

exc.match(regex); // [ "экскаватор" ]
esc.match(regex); // [ "эскалатор" ] 
```

### Необязательный символ — квантификатор `?`

Ещё один способ сделать символ необязательным: квантификатор `?`. Если звёздочка приемлет от нуля до бесконечности символов, то знак вопроса строже — его устраивает лишь 0 и 1: либо есть один символ, либо его нет вообще.

Скопировать кодJAVASCRIPT

```
/* делает букву u необязательной и будет искать
оба варинта написания favourite и favorite. */

const regex = /favou?rite/g;
const    str = 'favourite for favorite';

str.match(regex); // ["favourite", "favorite"] 
```

### Контроль повторов — квантификатор `{}`

Для поиска набора повторяющихся символов мы перечисляли их подряд в регулярном выражении:

Скопировать кодJAVASCRIPT

```
const regionCode = /\d\d\d/;
const    phoneNumber = 'Мой номер телефона: +7(999)123-12-21';

phoneNumber.match(regionCode); // [ "999" ] 
```

Квантификатор `{}` позволяет этого избежать. После символа можно поставить фигурные скобки и указать в них, сколько повторений этого символа мы хотим найти:

Скопировать кодJAVASCRIPT

```
const regionCode = /\d{3}/;
const    phoneNumber = 'Мой номер телефона: +7(999)123-12-21';

phoneNumber.match(regionCode); // [ "999" ] 
```

Можно также указывать не точное количество повторений, а диапазон. Например, когда нас устроит от 2 до 5 повторений:

Скопировать кодJAVASCRIPT

```
const str = 'столько, стооолько и вот стооооооооолько';
const regex = /сто{2,5}лько/;

str.match(regex); // [ "стооолько" ]

// в слове "стооооооооолько" повторов "о" больше 5 
```

Верхнюю границу числа повторений можно не указывать: например, можно искать от 5 до бесконечности. В таких случаях просто не пишите в фигурных скобках второе число. Но запятую ставьте — она нужна.

Скопировать кодJAVASCRIPT

```
const someSymbol = /a{1,}/g;
const    str = 'alohaa';

console.log(str.match(someSymbol)); // ["a", "aa"] 
```

|Имя|Ищет|
|---|---|
|`+`|от одного до бесконечности совпадений с символом подряд.|
|`*`|от нуля до бесконечности совпадений с символом подряд.|
|`?`|от нуля до одного совпадений с символом.|
|`{}`|точное количество совпадений или диапазон совпадений с символом подряд.|