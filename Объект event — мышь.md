[[Обработка событий]]

В предыдущем уроке мы говорили о событиях клавиатуры. Перейдём к мыши. С помощью мыши можно наводить курсор и кликать. Вот события наведения курсора:

1.  `mouseover` — мышь появляется над элементом, на который установлен слушатель;
2.  `mouseout` — курсор мыши покидает элемент.
    
    Ещё есть четыре события единичного щелчка мышью и одно событие двойного:
    
3.  `mousedown` — при щелчке мышью, когда кнопка в нижнем положении;
4.  `mouseup` — тоже при щелчке мышью, но когда кнопка отпущена. При этом важно, только где она была отпущена, а не где нажата. Поэтому событие сработает, если щёлкнуть в произвольном месте, удерживать кнопку, навести на элемент и затем её отпустить.
    
    Событие `mouseup` сработает по-особенному для клика правой кнопкой: по умолчанию оно вызывает контекстное меню, в котором пользователь может скопировать текст, изображение или посмотреть код. О том, как отменять такое поведение мы расскажем позже.
    
    События `mousedown` и `mouseup` срабатывают на все кнопки мыши: левую, правую и нажатие на колёсико. Они полезны для создания Drag'n'Drop — интерфейса, в котором элемент можно схватить и перетащить на другое место.
    
5.  `click` — при щелчке левой кнопкой, но только если она нажата и отпущена на элементе. То есть `click` происходит, когда на элементе друг за другом сработали `mousedown` и `mouseup`, но обязательно левой кнопкой мыши;
6.  `contextmenu` — при щелчке правой кнопкой, когда она в нижнем положении. Как `mousedown`, но для одной правой кнопки.
7.  `dblclick` — при двойном щелчке левой кнопкой. Обработчик отслеживает два срабатывания click подряд на одном элементе.

А теперь наглядно:

_В XXI веке приключения Алисы начались бы с такого сообщения_

Событий мыши много, но большинство из них нужны для специфических задач. Чаще всего вы будете применять только `click`, которое уже использовали.

## Дополнительные свойства объекта Event

Мы уже говорили о drag-and-drop как о возможности перетаскивать элементы по странице. Чтобы реализовать такой механизм, нужно понимать, где на странице произошло событие, то есть получить координаты события. Их можно отсчитывать от верхнего левого угла:

-   веб-страницы,
-   окна просмотра,
-   монитора.

Для каждого начала координат есть отдельное свойство.

Координаты по горизонтали и вертикали от угла веб-страницы хранятся в свойствах `event.pageX` и `event.pageY` соответственно. Пользоваться этими свойствами удобно, например, когда вы создаёте всплывающую подсказку около элемента, по которому кликнул пользователь.

Скопировать кодHTML

```
<div class="text" style="height: 1000px;">
    Что это? Чтобы узнать, щёлкните по мне два раза.
</div>
<div class="hint" style="display: none">Это же div</div> 
```

Вот такой код будет показывать подсказку именно там, где пользователь сделал двойной щелчок мышью:

Скопировать кодJAVASCRIPT

```
const button = document.querySelector('.text');
const hint = document.querySelector('.hint');

button.addEventListener('dblclick', function (event) {
    hint.setAttribute('style',
        `position: absolute;
        top: ${event.pageY}px;
        left: ${event.pageX}px;
        display: block;
        background-color: rgba(255, 204, 0, 0.5)`);
}); 
```

Координаты относительно угла окна просмотра хранятся в свойствах `event.clientX` и `event.clientY`. Это подойдёт для позиционирования окна чата со специалистом, которое можно встретить на многих сайтах:

Скопировать кодHTML

```
<div class="map">
    Это карта
</div>
<div class="whatIsThis">Что здесь?</div> 
```

Код заставит появляться блок с подсказкой там, где пользователь кликнул мышью:

Скопировать кодJAVASCRIPT

```
const whatIsThis = document.querySelector('.whatIsThis');
const map = document.querySelector('.map');

map.addEventListener('click', function(event) {
    whatIsThis.setAttribute('style', `
        display: block;
        position: fixed;
        left: ${event.clientX}px;
        top: ${event.clientY}px;
    `);
}); 
```

Свойства `event.screenX` и `event.screenY` хранят координаты относительно угла монитора, на котором открыт сайт. Они используются крайне редко.